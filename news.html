<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Newsroom - Accra Academy</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class', theme: { extend: { colors: { royal: '#002147', gold: '#FDBE11', soft: '#F0F4F8' }, fontFamily: { display: ['Merriweather', 'serif'] } } } }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link href="./css/custom.css" rel="stylesheet">
</head>

<body class="min-h-screen bg-soft dark:bg-gray-900 transition-colors duration-300 flex flex-col">

  <!-- STANDARD HEADER -->
  <!-- HEADER -->
  <header class="site-header fixed top-0 w-full z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 transition-all duration-300">
    <div class="container mx-auto px-4 md:px-6 flex justify-between items-center h-16 md:h-20">
        <div class="brand flex items-center gap-3">
            <img src="./assets/crest.png" alt="Crest" class="w-10 h-10 md:w-12 md:h-12 object-contain">
            <div class="brand-text leading-tight">
                <h1 class="text-lg md:text-2xl font-bold text-royal dark:text-gold font-display">Accra Academy</h1>
                <p class="text-[10px] md:text-xs text-gray-500 uppercase tracking-widest hidden sm:block">Esse Quam Videri</p>
            </div>
        </div>
        <nav class="navlinks hidden md:flex gap-6 text-sm font-bold uppercase tracking-wide">
            <a href="./index.html" class="hover:text-gold transition">Home</a>
            <a href="./about.html" class="hover:text-gold transition">About</a>
            <a href="./academics.html" class="hover:text-gold transition">Academics</a>
            <a href="./news.html" class="text-gold border-b-2 border-gold">News</a>
            <a href="./gallery.html" class="hover:text-gold transition">Gallery</a>
            <a href="./contacts.html" class="hover:text-gold transition">Contact</a>
        </nav>
        <div class="flex items-center gap-3">
            <button id="theme-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-gray-800 hover:text-gold"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg></button>
            <button class="mobile-btn md:hidden text-2xl text-royal dark:text-gold p-1">☰</button>
        </div>
    </div>
  </header>

  <!-- HERO (Added pt-28) -->
  <section class="pt-28 pb-16 bg-royal text-white relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-royal to-blue-900"></div>
      <div class="container mx-auto px-4 relative z-10 text-center md:text-left flex flex-col md:flex-row items-center gap-8">
          <div class="flex-1">
              <span class="text-gold font-bold tracking-widest uppercase text-xs">Bleoo Newsroom</span>
              <h1 class="text-4xl md:text-6xl font-display font-bold mb-4 mt-2">Campus <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-200">Updates</span></h1>
              <p class="text-gray-300 max-w-xl">Curated headlines featuring Accra Academy from across the web.</p>
          </div>
      </div>
  </section>

  <!-- NEWS FEED -->
  <section class="py-16 relative flex-grow">
      <div class="container mx-auto px-4">
          <div id="news-loader" class="flex flex-col items-center justify-center py-20">
              <div class="w-12 h-12 border-4 border-gray-200 border-t-gold rounded-full animate-spin"></div>
              <p class="mt-4 text-sm text-gray-500 animate-pulse">Scanning live feed...</p>
          </div>
          <div id="news-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      </div>
  </section>

  <script src="./js/script.js"></script>
  <script>
      async function fetchNews() {
          const container = document.getElementById('news-grid');
          const loader = document.getElementById('news-loader');
          const API_URL = '/api/news'; // ✅ Fixed for Production

          try {
              const res = await fetch(API_URL);
              const data = await res.json();
              loader.style.display = 'none';

              if(data.length === 0) {
                  container.innerHTML = `<div class="col-span-3 text-center text-gray-500 py-10">No recent news found.</div>`;
                  return;
              }

              container.innerHTML = data.map((item) => {
                  const date = new Date(item.pubDate).toLocaleDateString(undefined, { month: 'short', day: 'numeric' });
                  return `
                    <article class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow hover:shadow-lg transition flex flex-col border border-gray-100 dark:border-gray-700 h-full">
                        <div class="h-40 bg-gray-100 dark:bg-gray-700 flex items-center justify-center relative overflow-hidden">
                            <img src="./assets/crest.png" class="h-24 opacity-20 transform rotate-12">
                            <span class="absolute top-3 right-3 bg-royal text-gold text-[10px] font-bold px-2 py-1 rounded">${item.source}</span>
                        </div>
                        <div class="p-5 flex-1 flex flex-col">
                            <div class="text-xs text-gray-400 mb-2 font-mono">${date}</div>
                            <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-2 leading-snug hover:text-gold transition"><a href="${item.link}" target="_blank">${item.title}</a></h3>
                            <p class="text-gray-500 dark:text-gray-400 text-xs mb-4 line-clamp-3 flex-1">${item.snippet}</p>
                            <a href="${item.link}" target="_blank" class="text-xs font-bold text-royal dark:text-gold hover:underline mt-auto inline-flex items-center">Read Full Story &rarr;</a>
                        </div>
                    </article>
                  `;
              }).join('');
          } catch (error) {
              loader.innerHTML = `<p class="text-red-500 text-center">News feed unavailable.</p>`;
          }
      }
      document.addEventListener('DOMContentLoaded', fetchNews);
  </script>
</body>
</html>